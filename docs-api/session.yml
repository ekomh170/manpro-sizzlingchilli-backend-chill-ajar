openapi: 3.0.3
info:
  title: Session API
  version: 1.0.0
  description: Dokumentasi endpoint SessionController untuk fitur sesi pengajaran pada platform Chill Ajar.
servers:
  - url: http://localhost:8000/api
paths:
  /sessions:
    get:
      summary: Daftar semua sesi
      tags: [Session]
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Daftar sesi
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Session"
              examples:
                default:
                  value:
                    - id: 10
                      mentor_id: 2
                      pelanggan_id: 7
                      detailKursus: "Kalkulus Dasar"
                      jadwal: "2025-05-20T10:00:00Z"
                      statusSesi: "booked"
                      mentor:
                        id: 2
                        user_id: 5
                        rating: 4.8
                        biayaPerSesi: 150000
                        gayaMengajar: "Online"
                        deskripsi: "Berpengalaman mengajar matematika SMA."
                        user:
                          id: 5
                          nama: "Budi Santoso"
                          email: "budi@example.com"
                      pelanggan:
                        id: 7
                        user_id: 8
                        statusPembayaran: "lunas"
                        user:
                          id: 8
                          nama: "Siti Aminah"
                          email: "siti@example.com"
                      testimoni:
                        id: 1
                        session_id: 10
                        pelanggan_id: 7
                        mentor_id: 2
                        rating: 5
                        komentar: "Mentor sangat membantu dan jelas dalam mengajar."
                        tanggal: "2025-05-21"
    post:
      summary: Tambah sesi baru
      tags: [Session]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                mentor_id:
                  type: integer
                  example: 2
                pelanggan_id:
                  type: integer
                  example: 7
                detailKursus:
                  type: string
                  example: "Kalkulus Dasar"
                jadwal:
                  type: string
                  format: date-time
                  example: "2025-05-20T10:00:00Z"
              required:
                - mentor_id
                - pelanggan_id
                - detailKursus
                - jadwal
            examples:
              default:
                value:
                  mentor_id: 2
                  pelanggan_id: 7
                  detailKursus: "Kalkulus Dasar"
                  jadwal: "2025-05-20T10:00:00Z"
      responses:
        "201":
          description: Sesi berhasil dibuat
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Session"
              examples:
                default:
                  value:
                    id: 10
                    mentor_id: 2
                    pelanggan_id: 7
                    detailKursus: "Kalkulus Dasar"
                    jadwal: "2025-05-20T10:00:00Z"
                    statusSesi: "booked"
  /sessions/{id}:
    get:
      summary: Lihat detail sesi
      tags: [Session]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Detail sesi
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Session"
              examples:
                default:
                  value:
                    id: 10
                    mentor_id: 2
                    pelanggan_id: 7
                    detailKursus: "Kalkulus Dasar"
                    jadwal: "2025-05-20T10:00:00Z"
                    statusSesi: "booked"
    put:
      summary: Update sesi
      tags: [Session]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                detailKursus:
                  type: string
                  example: "Kalkulus Lanjut"
                jadwal:
                  type: string
                  format: date-time
                  example: "2025-05-22T10:00:00Z"
                statusSesi:
                  type: string
                  example: "confirmed"
            examples:
              default:
                value:
                  detailKursus: "Kalkulus Lanjut"
                  jadwal: "2025-05-22T10:00:00Z"
                  statusSesi: "confirmed"
      responses:
        "200":
          description: Sesi berhasil diupdate
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Session"
              examples:
                default:
                  value:
                    id: 10
                    mentor_id: 2
                    pelanggan_id: 7
                    detailKursus: "Kalkulus Lanjut"
                    jadwal: "2025-05-22T10:00:00Z"
                    statusSesi: "confirmed"
    delete:
      summary: Hapus sesi
      tags: [Session]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        "204":
          description: Sesi berhasil dihapus
  /sessions/{id}/konfirmasi:
    post:
      summary: Konfirmasi sesi
      tags: [Session]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Sesi berhasil dikonfirmasi
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Sesi dikonfirmasi
                  session:
                    $ref: "#/components/schemas/Session"
              examples:
                default:
                  value:
                    message: Sesi dikonfirmasi
                    session:
                      id: 10
                      statusSesi: confirmed
  /sessions/{id}/selesai:
    post:
      summary: Tandai sesi sebagai selesai
      tags: [Session]
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Sesi berhasil diselesaikan
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Sesi selesai
                  session:
                    $ref: "#/components/schemas/Session"
              examples:
                default:
                  value:
                    message: Sesi selesai
                    session:
                      id: 10
                      statusSesi: completed
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    Session:
      type: object
      properties:
        id:
          type: integer
          example: 10
        mentor_id:
          type: integer
          example: 2
        pelanggan_id:
          type: integer
          example: 7
        detailKursus:
          type: string
          example: "Kalkulus Dasar"
        jadwal:
          type: string
          format: date-time
          example: "2025-05-20T10:00:00Z"
        statusSesi:
          type: string
          example: "booked"
        mentor:
          type: object
          properties:
            id:
              type: integer
              example: 2
            user_id:
              type: integer
              example: 5
            rating:
              type: number
              example: 4.8
            biayaPerSesi:
              type: number
              example: 150000
            gayaMengajar:
              type: string
              example: "Online"
            deskripsi:
              type: string
              example: "Berpengalaman mengajar matematika SMA."
            user:
              type: object
              properties:
                id:
                  type: integer
                  example: 5
                nama:
                  type: string
                  example: "Budi Santoso"
                email:
                  type: string
                  example: "budi@example.com"
        pelanggan:
          type: object
          properties:
            id:
              type: integer
              example: 7
            user_id:
              type: integer
              example: 8
            statusPembayaran:
              type: string
              example: "lunas"
            user:
              type: object
              properties:
                id:
                  type: integer
                  example: 8
                nama:
                  type: string
                  example: "Siti Aminah"
                email:
                  type: string
                  example: "siti@example.com"
        testimoni:
          type: object
          properties:
            id:
              type: integer
              example: 1
            session_id:
              type: integer
              example: 10
            pelanggan_id:
              type: integer
              example: 7
            mentor_id:
              type: integer
              example: 2
            rating:
              type: number
              example: 5
            komentar:
              type: string
              example: "Mentor sangat membantu dan jelas dalam mengajar."
            tanggal:
              type: string
              format: date
              example: "2025-05-21"
