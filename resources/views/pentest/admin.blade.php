<!-- resources/views/pentest/admin.blade.php -->
@include('pentest._template', [
    'title' => 'Pentest API - Admin Controller',
    'apiList' => [
        [
            'label' => 'Statistik Data (Jumlah User, Mentor, Pelanggan, Kursus, Sesi, Transaksi)',
            'method' => 'GET',
            'url' => '/api/admin/dashboard-info',
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Menampilkan statistik jumlah data utama di sistem.</span>',
        ],
        [
            'label' => 'Daftar Semua Pengguna',
            'method' => 'GET',
            'url' => '/api/admin/users',
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Ubah Role Pengguna',
            'method' => 'PUT',
            'url' => '/api/admin/users/{userId}/role',
            'body' => ['peran' => 'admin/mentor/pelanggan'],
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Tambah Pengguna Baru',
            'method' => 'POST',
            'url' => '/api/admin/users',
            'body' => [
                'nama' => '',
                'email' => '',
                'password' => '',
                'peran' => '',
                'nomorTelepon' => '',
                'alamat' => '',
            ],
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Hapus Pengguna',
            'method' => 'DELETE',
            'url' => '/api/admin/users/{userId}',
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700"><b>‚≠ê NEW ENDPOINT:</b> Menghapus user beserta relasi terkait (mentor/pelanggan jika ada). User tidak akan bisa login lagi.</span>',
        ],
        [
            'label' => 'Tambah Mentor Langsung',
            'method' => 'POST',
            'url' => '/api/admin/mentor',
            'body' => [
                'nama' => '',
                'email' => '',
                'password' => '',
                'deskripsi' => '',
                'biayaPerSesi' => '',
            ],
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Tambah Pelanggan Langsung',
            'method' => 'POST',
            'url' => '/api/admin/pelanggan',
            'body' => [
                'nama' => '',
                'email' => '',
                'password' => '',
                'nomorTelepon' => '',
                'alamat' => '',
            ],
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Daftar Mentor',
            'method' => 'GET',
            'url' => '/api/admin/mentor',
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Detail Mentor',
            'method' => 'GET',
            'url' => '/api/admin/mentor/{id}',
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Update Mentor',
            'method' => 'PUT',
            'url' => '/api/admin/mentor/{id}',
            'body' => ['// Data mentor yang ingin diupdate'],
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Hapus Mentor (beserta user terkait, mentor tidak bisa login lagi)',
            'method' => 'DELETE',
            'url' => '/api/admin/mentor/{id}',
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Menghapus mentor akan <b>menghapus user terkait</b>.<br>Mentor tidak akan bisa login lagi.<br>Jika user sudah dihapus, login dengan email/password mentor akan gagal.</span>',
        ],
        [
            'label' => 'Daftar Pelanggan',
            'method' => 'GET',
            'url' => '/api/admin/pelanggan',
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Detail Pelanggan',
            'method' => 'GET',
            'url' => '/api/admin/pelanggan/{id}',
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Update Pelanggan',
            'method' => 'PUT',
            'url' => '/api/admin/pelanggan/{id}',
            'body' => ['// Data pelanggan yang ingin diupdate'],
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Hapus Pelanggan',
            'method' => 'DELETE',
            'url' => '/api/admin/pelanggan/{id}',
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Verifikasi Pembayaran',
            'method' => 'POST',
            'url' => '/api/admin/verifikasi-pembayaran/{transaksiId}',
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Tolak Pembayaran',
            'method' => 'POST',
            'url' => '/api/admin/tolak-pembayaran/{transaksiId}',
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Notifikasi ke Mentor',
            'method' => 'POST',
            'url' => '/api/admin/notifikasi/mentor/{sessionId}',
            'headers' => ['Authorization' => 'Bearer {token}'],
        ],
        [
            'label' => 'Eksekusi Hapus Sesi Expired (24 jam, belum dibayar)',
            'method' => 'POST',
            'url' => '/api/pentest/exec-hapus-sesi-expired',
            'body' => null,
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Menjalankan command artisan <b>sesi:hapus-expired</b> untuk menghapus sesi yang sudah lebih dari 24 jam dan belum ada pembayaran. Hanya untuk admin/pengujian.</span>',
        ],
        [
            'label' => 'Eksekusi Update Rating Mentor (Automation)',
            'method' => 'POST',
            'url' => '/api/pentest/exec-update-rating-mentor',
            'body' => null,
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Menjalankan command artisan <b>mentor:update-rating</b> untuk menghitung ulang rating semua mentor berdasarkan testimoni. Hanya untuk admin/pengujian.</span>',
        ],
    ],
])
<div class="mb-4">
    <label class="font-semibold text-amber-700">Contoh Automation:</label>
    <div class="flex flex-wrap gap-2 mt-2">
        <button type="button"
            onclick="setExampleBody({
            body: null,
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/pentest/exec-hapus-sesi-expired',
            method: 'POST',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Contoh eksekusi automation hapus sesi expired (lebih dari 24 jam, belum dibayar). Hanya untuk admin/pengujian.<br>Response: { message, output }</span>'
        })"
            class="bg-amber-200 hover:bg-amber-300 text-amber-900 font-semibold px-3 py-1 rounded shadow">
            Eksekusi Hapus Sesi Expired (Automation)
        </button>
        <button type="button"
            onclick="setExampleBody({
            body: null,
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/pentest/exec-update-rating-mentor',
            method: 'POST',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Contoh eksekusi automation update rating mentor dari testimoni. Hanya untuk admin/pengujian.<br>Response: { message, output }<br>Rating mentor akan otomatis dihitung ulang dari seluruh testimoni yang ada.</span>'
        })"
            class="bg-amber-200 hover:bg-amber-300 text-amber-900 font-semibold px-3 py-1 rounded shadow">
            Eksekusi Update Rating Mentor (Automation)
        </button>
    </div>
</div>
<div class="mb-4">
    <label class="font-semibold text-amber-700">Contoh Penggunaan Endpoint Admin Controller:</label>
    <div class="flex flex-wrap gap-2 mt-2">
        <button type="button"
            onclick="setExampleBody({
            body: null,
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/admin/users',
            method: 'GET',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Lihat semua pengguna (admin, mentor, pelanggan).</span>'
        })"
            class="bg-amber-200 hover:bg-amber-300 text-amber-900 font-semibold px-3 py-1 rounded shadow">Daftar Semua
            Pengguna</button>
        <button type="button"
            onclick="setExampleBody({
            body: { peran: 'mentor' },
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/admin/users/1/role',
            method: 'PUT',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Ubah role userId=1 menjadi mentor/admin/pelanggan.</span>'
        })"
            class="bg-amber-100 hover:bg-amber-200 text-amber-900 font-semibold px-3 py-1 rounded shadow">Ubah Role
            Pengguna</button>
        <button type="button"
            onclick="setExampleBody({
            body: { nama: 'Admin Baru', email: 'adminbaru@demo.com', password: 'password', peran: 'admin', nomorTelepon: '', alamat: '' },
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/admin/users',
            method: 'POST',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Tambah user admin baru.</span>'
        })"
            class="bg-amber-200 hover:bg-amber-300 text-amber-900 font-semibold px-3 py-1 rounded shadow">Tambah
            Admin</button>
        <button type="button"
            onclick="setExampleBody({
            body: { nama: 'Mentor Baru', email: 'mentorbaru@demo.com', password: 'password', deskripsi: 'Deskripsi', biayaPerSesi: 50000 },
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/admin/mentor',
            method: 'POST',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Tambah mentor baru.</span>'
        })"
            class="bg-amber-100 hover:bg-amber-200 text-amber-900 font-semibold px-3 py-1 rounded shadow">Tambah
            Mentor</button>
        <button type="button"
            onclick="setExampleBody({
            body: { nama: 'Pelanggan Baru', email: 'pelangganbaru@demo.com', password: 'password', nomorTelepon: '08123456789', alamat: 'Jl. Contoh' },
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/admin/pelanggan',
            method: 'POST',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Tambah pelanggan baru.</span>'
        })"
            class="bg-amber-200 hover:bg-amber-300 text-amber-900 font-semibold px-3 py-1 rounded shadow">Tambah
            Pelanggan</button>
        <button type="button"
            onclick="setExampleBody({
            body: null,
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/admin/mentor',
            method: 'GET',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Daftar semua mentor beserta user.</span>'
        })"
            class="bg-amber-100 hover:bg-amber-200 text-amber-900 font-semibold px-3 py-1 rounded shadow">Daftar
            Mentor</button>
        <button type="button"
            onclick="setExampleBody({
            body: null,
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/admin/pelanggan',
            method: 'GET',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Daftar semua pelanggan.</span>'
        })"
            class="bg-amber-200 hover:bg-amber-300 text-amber-900 font-semibold px-3 py-1 rounded shadow">Daftar
            Pelanggan</button>
        <button type="button"
            onclick="setExampleBody({
            body: null,
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/admin/verifikasi-pembayaran/1',
            method: 'POST',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Verifikasi pembayaran transaksiId=1.</span>'
        })"
            class="bg-amber-100 hover:bg-amber-200 text-amber-900 font-semibold px-3 py-1 rounded shadow">Verifikasi
            Pembayaran</button>
        <button type="button"
            onclick="setExampleBody({
            body: null,
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/admin/tolak-pembayaran/1',
            method: 'POST',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Tolak pembayaran transaksiId=1. Sistem akan mengirim notifikasi WhatsApp ke pelanggan.</span>'
        })"
            class="bg-amber-200 hover:bg-amber-300 text-amber-900 font-semibold px-3 py-1 rounded shadow">Tolak
            Pembayaran</button>
        <button type="button"
            onclick="setExampleBody({
            body: null,
            headers: { Authorization: 'Bearer <token>' },
            url: '/api/admin/notifikasi/mentor/1',
            method: 'POST',
            noteHtml: '<span class=\'text-xs text-amber-700\'>Kirim notifikasi ke mentor untuk sessionId=1.</span>'
        })"
            class="bg-amber-100 hover:bg-amber-200 text-amber-900 font-semibold px-3 py-1 rounded shadow">Notifikasi ke
            Mentor</button>
    </div>
</div>
