<!-- resources/views/pentest/transaksi.blade.php -->
@include('pentest._template', [
    'title' => 'Pentest API - Transaksi Controller',
    'apiList' => [
        [
            'label' => 'Lihat Semua Transaksi (relasi lengkap)',
            'method' => 'GET',
            'url' => '/api/transaksi',
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Menampilkan semua transaksi beserta relasi <b>pelanggan.user</b>, <b>mentor.user</b>, <b>sesi.kursus</b>, dan status pembayaran. Status pembayaran: <b>menunggu_verifikasi</b>, <b>accepted</b>, <b>rejected</b>.</span>',
        ],
        [
            'label' => 'Detail Transaksi',
            'method' => 'GET',
            'url' => '/api/transaksi/{id}',
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Menampilkan detail transaksi beserta relasi pelanggan, mentor, sesi, dan status pembayaran. Ganti <b>{id}</b> sesuai data Anda.</span>',
        ],
        [
            'label' => 'Tambah Transaksi',
            'method' => 'POST',
            'url' => '/api/transaksi',
            'body' => [
                'pelanggan_id' => '',
                'mentor_id' => '',
                'sesi_id' => '',
                'jumlah' => '',
                'statusPembayaran' => '',
                'metodePembayaran' => '',
                'tanggalPembayaran' => '',
            ],
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Field <b>statusPembayaran</b> wajib diisi dengan salah satu: <b>menunggu_verifikasi</b>, <b>accepted</b>, <b>rejected</b>.<br>Field <b>pelanggan_id</b>, <b>mentor_id</b>, <b>sesi_id</b>, <b>jumlah</b>, <b>metodePembayaran</b>, dan <b>tanggalPembayaran</b> wajib diisi.</span>',
        ],
        [
            'label' => 'Update Transaksi',
            'method' => 'PUT',
            'url' => '/api/transaksi/{id}',
            'body' => [
                'pelanggan_id' => '',
                'mentor_id' => '',
                'sesi_id' => '',
                'jumlah' => '',
                'statusPembayaran' => '',
                'metodePembayaran' => '',
                'tanggalPembayaran' => '',
            ],
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Update data transaksi. <b>statusPembayaran</b> dapat diubah ke <b>menunggu_verifikasi</b>, <b>accepted</b>, atau <b>rejected</b> sesuai proses. Ganti <b>{id}</b> sesuai data Anda.</span>',
        ],
        [
            'label' => 'Hapus Transaksi',
            'method' => 'DELETE',
            'url' => '/api/transaksi/{id}',
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Menghapus transaksi berdasarkan <b>id</b>. Hanya bisa dilakukan oleh admin atau user terkait.</span>',
        ],
        [
            'label' => 'Unggah Bukti Pembayaran',
            'method' => 'POST',
            'url' => '/api/transaksi/{id}/unggah-bukti',
            'body' => [
                'buktiPembayaran' => '',
            ],
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Upload file gambar bukti pembayaran (jpg, jpeg, png, pdf, max 5MB). Hanya bisa diunggah oleh pelanggan terkait. Status pembayaran akan berubah menjadi <b>menunggu_verifikasi</b> setelah upload ulang.</span>',
        ],
        [
            'label' => 'Verifikasi Pembayaran',
            'method' => 'POST',
            'url' => '/api/transaksi/{id}/verifikasi',
            'body' => null,
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Mengubah status pembayaran menjadi <b>accepted</b> (diverifikasi admin). Hanya admin yang dapat melakukan aksi ini.</span>',
        ],
        [
            'label' => 'Tolak Pembayaran',
            'method' => 'POST',
            'url' => '/api/transaksi/{id}/tolak',
            'body' => null,
            'headers' => ['Authorization' => 'Bearer {token}'],
            'noteHtml' =>
                '<span class="text-xs text-amber-700">Mengubah status pembayaran menjadi <b>rejected</b> (ditolak admin). Hanya admin yang dapat melakukan aksi ini.</span>',
        ],
    ],
])
