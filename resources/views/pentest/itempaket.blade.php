<!-- resources/views/pentest/itempaket.blade.php -->

@php
    $apiList = [
        [
            'label' => 'Daftar Item Paket',
            'method' => 'GET',
            'url' => '/api/item-paket',
            'noteHtml' =>
                '<b>Ambil semua data item paket.</b><br>Field: <code>id, nama, harga, diskon, deskripsi, created_at, updated_at</code>',
        ],
        [
            'label' => 'Detail Item Paket',
            'method' => 'GET',
            'url' => '/api/item-paket/{id}',
            'noteHtml' =>
                '<b>Ambil detail satu item paket.</b><br>Field: <code>id, nama, harga, diskon, deskripsi, created_at, updated_at</code>',
        ],
        [
            'label' => 'Tambah Item Paket',
            'method' => 'POST',
            'url' => '/api/item-paket',
            'body' => [
                'nama' => 'Request Materi',
                'harga' => 5000,
                'diskon' => 500,
                'deskripsi' => 'Permintaan materi pembelajaran sesuai kebutuhan',
            ],
            'noteHtml' =>
                '<b>Tambah item paket baru.</b><br>Field wajib: <code>nama, harga</code><br>Field opsional: <code>diskon, deskripsi</code>',
        ],
        [
            'label' => 'Update Item Paket',
            'method' => 'PUT',
            'url' => '/api/item-paket/{id}',
            'body' => [
                'nama' => 'Request Materi Update',
                'harga' => 6000,
                'diskon' => 1000,
                'deskripsi' => 'Update deskripsi materi',
            ],
            'noteHtml' =>
                '<span class="text-xs text-amber-700"><b>⭐ AUTO-RECALCULATION:</b> Update data item paket. Field bisa diisi sebagian: <code>nama, harga, diskon, deskripsi</code>. <b>Jika harga atau diskon berubah, semua paket yang menggunakan item ini akan otomatis rekalkulasi harga_dasar-nya</b> dengan formula: <code>harga_dasar = sum(max(item.harga - item.diskon, 0) * jumlah_item)</code>.</span>',
        ],
        [
            'label' => 'Hapus Item Paket',
            'method' => 'DELETE',
            'url' => '/api/item-paket/{id}',
            'noteHtml' =>
                '<span class="text-xs text-amber-700"><b>⭐ AUTO-RECALCULATION:</b> Soft delete item paket. <b>Setelah item dihapus, semua paket yang menggunakan item ini akan otomatis rekalkulasi harga_dasar-nya</b> untuk menyesuaikan dengan item yang tersisa.</span>',
        ],
    ];
@endphp

@include('pentest._template', [
    'title' => 'Pentest API - Item Paket Controller',
    'desc' => 'Halaman ini digunakan untuk menguji endpoint API Item Paket (CRUD).',
    'apiList' => $apiList,
])
